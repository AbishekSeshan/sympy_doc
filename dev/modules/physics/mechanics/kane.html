

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Kane’s Method in Physics/Mechanics &mdash; SymPy 0.7.1-git documentation</title>
    
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.7.1-git',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML-full"></script>
    <link rel="shortcut icon" href="../../../_static/SymPy-Favicon.ico"/>
    <link rel="top" title="SymPy 0.7.1-git documentation" href="../../../index.html" />
    <link rel="up" title="Physics/Mechanics Module" href="index.html" />
    <link rel="next" title="Particle" href="particle.html" />
    <link rel="prev" title="Mechanics: Masses, Inertias, Particles and Rigid Bodies" href="masses.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../../../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="particle.html" title="Particle"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="masses.html" title="Mechanics: Masses, Inertias, Particles and Rigid Bodies"
             accesskey="P">previous</a> |</li>
        <li><a href="../../../index.html">SymPy 0.7.1-git documentation</a> &raquo;</li>
          <li><a href="../../index.html" >SymPy Modules Reference</a> &raquo;</li>
          <li><a href="../index.html" >Physics Module</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Physics/Mechanics Module</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="kane-s-method-in-physics-mechanics">
<h1>Kane&#8217;s Method in Physics/Mechanics<a class="headerlink" href="#kane-s-method-in-physics-mechanics" title="Permalink to this headline">¶</a></h1>
<p><tt class="xref py py-mod docutils literal"><span class="pre">mechanics</span></tt> has been written for use with Kane&#8217;s method of forming
equations of motion <a class="reference internal" href="reference.html#kane1985">[Kane1985]</a>. This document will describe Kane&#8217;s Method
as used in this module, but not how the equations are actually derived.</p>
<div class="section" id="structure-of-equations">
<h2>Structure of Equations<a class="headerlink" href="#structure-of-equations" title="Permalink to this headline">¶</a></h2>
<p>In <tt class="xref py py-mod docutils literal"><span class="pre">mechanics</span></tt> we are assuming there are 5 basic sets of equations needed
to describe a system. They are: holonomic constraints, non-holonomic
constraints, kinematic differential equations, dynamic equations, and
differentiated non-holonomic equations.</p>
<div class="math">
\[\begin{split}\mathbf{f_h}(q, t) &amp;= 0\\
\mathbf{k_{nh}}(q, t) u + \mathbf{f_{nh}}(q, t) &amp;= 0\\
\mathbf{k_{k\dot{q}}}(q, t) \dot{q} + \mathbf{k_{ku}}(q, t) u +
\mathbf{f_k}(q, t) &amp;= 0\\
\mathbf{k_d}(q, t) \dot{u} + \mathbf{f_d}(q, \dot{q}, u, t) &amp;= 0\\
\mathbf{k_{dnh}}(q, t) \dot{u} + \mathbf{f_{dnh}}(q, \dot{q}, u, t) &amp;= 0\\\end{split}\]</div>
<p>In <tt class="xref py py-mod docutils literal"><span class="pre">mechanics</span></tt> holonomic constraints are only used for the linearization
process; it is assumed that they will be too complicated to solve for the
dependent coordinate(s).  If you are able to easily solve a holonomic
constraint, you should consider redefining your problem in terms of a smaller
set of coordinates.</p>
<p>Kane&#8217;s method forms two expressions, <span class="math">\(F_r\)</span> and <span class="math">\(F_r^*\)</span>, whose sum
is zero. In this module, these expressions are rearranged into the following
form:</p>
<blockquote>
<div><span class="math">\(\mathbf{M}(q, t) \dot{u} = \mathbf{f}(q, \dot{q}, u, t)\)</span></div></blockquote>
<p>For a non-holonomic system with &#8220;o&#8221; total speeds and &#8220;m&#8221; motion constraints, we
will get o - m equations. The mass-matrix/forcing equations are then augmented
in the following fashion:</p>
<div class="math">
\[\begin{split}\mathbf{M}(q, t) &amp;= \begin{bmatrix} \mathbf{k_d}(q, t) \\
\mathbf{k_{dnh}}(q, t) \end{bmatrix}\\
\mathbf{_{(forcing)}}(q, \dot{q}, u, t) &amp;= \begin{bmatrix}
- \mathbf{f_d}(q, \dot{q}, u, t) \\ - \mathbf{f_{dnh}}(q, \dot{q}, u, t)
\end{bmatrix}\\\end{split}\]</div>
</div>
<div class="section" id="id2">
<h2>Kane&#8217;s Method in Physics/Mechanics<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Formulation of the equations of motion in <tt class="xref py py-mod docutils literal"><span class="pre">mechanics</span></tt> starts with creation
of a <tt class="docutils literal"><span class="pre">Kane</span></tt> object. Upon initialization of the <tt class="docutils literal"><span class="pre">Kane</span></tt> object, an inertial
reference frame needs to be supplied.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sympy.physics.mechanics</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">N</span> <span class="o">=</span> <span class="n">ReferenceFrame</span><span class="p">(</span><span class="s">&#39;N&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span> <span class="o">=</span> <span class="n">Kane</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
</pre></div>
</div>
<p>Next is the specification of coordinates and speeds for Kane&#8217;s Method.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">q1</span><span class="p">,</span> <span class="n">q2</span><span class="p">,</span> <span class="n">u1</span><span class="p">,</span> <span class="n">u2</span> <span class="o">=</span> <span class="n">dynamicsymbols</span><span class="p">(</span><span class="s">&#39;q1 q2 u1 u2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q1d</span><span class="p">,</span> <span class="n">q2d</span><span class="p">,</span> <span class="n">u1d</span><span class="p">,</span> <span class="n">u2d</span> <span class="o">=</span> <span class="n">dynamicsymbols</span><span class="p">(</span><span class="s">&#39;q1 q2 u1 u2&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">coords</span><span class="p">([</span><span class="n">q1</span><span class="p">,</span> <span class="n">q2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">speeds</span><span class="p">([</span><span class="n">u1</span><span class="p">,</span> <span class="n">u2</span><span class="p">])</span>
</pre></div>
</div>
<p>It is also important to supply the order of coordinates and speeds properly if
there are dependent coordinates and speeds. They must be supplied after
independent coordinates and speeds or as a keyword argument; this is shown
later:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">q1</span><span class="p">,</span> <span class="n">q2</span><span class="p">,</span> <span class="n">q3</span><span class="p">,</span> <span class="n">q4</span> <span class="o">=</span> <span class="n">dynamicsymbols</span><span class="p">(</span><span class="s">&#39;q1 q2 q3 q4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u1</span><span class="p">,</span> <span class="n">u2</span><span class="p">,</span> <span class="n">u3</span><span class="p">,</span> <span class="n">u4</span> <span class="o">=</span> <span class="n">dynamicsymbols</span><span class="p">(</span><span class="s">&#39;u1 u2 u3 u4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Here we will assume q2 is dependent, and u2 and u3 are dependent</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># We need the constraint equations to enter them though</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">coords</span><span class="p">([</span><span class="n">q1</span><span class="p">,</span> <span class="n">q3</span><span class="p">,</span> <span class="n">q4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">speeds</span><span class="p">([</span><span class="n">u1</span><span class="p">,</span> <span class="n">u4</span><span class="p">])</span>
</pre></div>
</div>
<p>Additionally, if there are auxiliary speeds, they need to be identified here.
See the examples for more information on this. In this example u4 is the
auxiliary speed.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">u1</span><span class="p">,</span> <span class="n">u2</span><span class="p">,</span> <span class="n">u3</span><span class="p">,</span> <span class="n">u4</span> <span class="o">=</span> <span class="n">dynamicsymbols</span><span class="p">(</span><span class="s">&#39;u1 u2 u3 u4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">speeds</span><span class="p">([</span><span class="n">u1</span><span class="p">,</span> <span class="n">u2</span><span class="p">,</span> <span class="n">u3</span><span class="p">],</span> <span class="n">u_auxiliary</span><span class="o">=</span><span class="p">[</span><span class="n">u4</span><span class="p">])</span>
</pre></div>
</div>
<p>Kinematic differential equations must also be supplied; there are to be
provided as a list of expressions which are each equal to zero. A trivial
example follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">coords</span><span class="p">([</span><span class="n">q1</span><span class="p">,</span> <span class="n">q2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kd</span> <span class="o">=</span> <span class="p">[</span><span class="n">q1d</span> <span class="o">-</span> <span class="n">u1</span><span class="p">,</span> <span class="n">q2d</span> <span class="o">-</span> <span class="n">u2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">kindiffeq</span><span class="p">(</span><span class="n">kd</span><span class="p">)</span>
</pre></div>
</div>
<p>A dictionary returning the solved <span class="math">\(\dot{q}\)</span>&#8216;s can also be solved for:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mechanics_printing</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">kindiffdict</span><span class="p">()</span>
<span class="go">{q1&#39;: u1, q2&#39;: u2}</span>
</pre></div>
</div>
<p>Turning on <tt class="docutils literal"><span class="pre">mechanics_printing()</span></tt> makes the expressions significantly
shorter and is recommended.</p>
<p>If there are non-holonomic constraints, dependent speeds need to be specified
(and so do dependent coordinates, but they only come into play when linearizing
the system). The dependent speeds need to be specified in the same order as
they were earlier. The constraints need to be supplied in a list of expressions
which are equal to zero, trivial motion and configuration constraints are shown
below:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">N</span> <span class="o">=</span> <span class="n">ReferenceFrame</span><span class="p">(</span><span class="s">&#39;N&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span> <span class="o">=</span> <span class="n">Kane</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q1</span><span class="p">,</span> <span class="n">q2</span><span class="p">,</span> <span class="n">q3</span><span class="p">,</span> <span class="n">q4</span> <span class="o">=</span> <span class="n">dynamicsymbols</span><span class="p">(</span><span class="s">&#39;q1 q2 q3 q4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u1</span><span class="p">,</span> <span class="n">u2</span><span class="p">,</span> <span class="n">u3</span><span class="p">,</span> <span class="n">u4</span> <span class="o">=</span> <span class="n">dynamicsymbols</span><span class="p">(</span><span class="s">&#39;u1 u2 u3 u4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c">#Here we will assume q2 is dependent, and u2 and u3 are dependent</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">speed_cons</span> <span class="o">=</span> <span class="p">[</span><span class="n">u2</span> <span class="o">-</span> <span class="n">u1</span><span class="p">,</span> <span class="n">u3</span> <span class="o">-</span> <span class="n">u1</span> <span class="o">-</span> <span class="n">u4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coord_cons</span> <span class="o">=</span> <span class="p">[</span><span class="n">q2</span> <span class="o">-</span> <span class="n">q1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">coords</span><span class="p">([</span><span class="n">q1</span><span class="p">,</span> <span class="n">q3</span><span class="p">,</span> <span class="n">q4</span><span class="p">],</span> <span class="n">qdep</span><span class="o">=</span><span class="p">[</span><span class="n">q2</span><span class="p">],</span> <span class="n">coneqs</span><span class="o">=</span><span class="n">coord_cons</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">speeds</span><span class="p">([</span><span class="n">u1</span><span class="p">,</span> <span class="n">u4</span><span class="p">],</span> <span class="n">udep</span><span class="o">=</span><span class="p">[</span><span class="n">u2</span><span class="p">,</span> <span class="n">u3</span><span class="p">],</span> <span class="n">coneqs</span><span class="o">=</span><span class="n">speed_cons</span><span class="p">)</span>
</pre></div>
</div>
<p>The final step in forming the equations of motion is supplying a list of
bodies and particles, and a list of 2-tuples of the form <tt class="docutils literal"><span class="pre">(Point,</span> <span class="pre">Vector)</span></tt>
or <tt class="docutils literal"><span class="pre">(ReferenceFrame,</span> <span class="pre">Vector)</span></tt> to represent applied forces and torques.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">N</span> <span class="o">=</span> <span class="n">ReferenceFrame</span><span class="p">(</span><span class="s">&#39;N&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="p">,</span> <span class="n">u</span> <span class="o">=</span> <span class="n">dynamicsymbols</span><span class="p">(</span><span class="s">&#39;q u&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qd</span><span class="p">,</span> <span class="n">ud</span> <span class="o">=</span> <span class="n">dynamicsymbols</span><span class="p">(</span><span class="s">&#39;q u&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">P</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">P</span><span class="o">.</span><span class="n">set_vel</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">u</span> <span class="o">*</span> <span class="n">N</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Pa</span> <span class="o">=</span> <span class="n">Particle</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Pa</span><span class="o">.</span><span class="n">point</span> <span class="o">=</span> <span class="n">P</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Pa</span><span class="o">.</span><span class="n">mass</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">BL</span> <span class="o">=</span> <span class="p">[</span><span class="n">Pa</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FL</span> <span class="o">=</span> <span class="p">[(</span><span class="n">P</span><span class="p">,</span> <span class="mi">7</span> <span class="o">*</span> <span class="n">N</span><span class="o">.</span><span class="n">x</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span> <span class="o">=</span> <span class="n">Kane</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">coords</span><span class="p">([</span><span class="n">q</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">speeds</span><span class="p">([</span><span class="n">u</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">kindiffeq</span><span class="p">([</span><span class="n">qd</span> <span class="o">-</span> <span class="n">u</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">fr</span><span class="p">,</span> <span class="n">frstar</span><span class="p">)</span> <span class="o">=</span> <span class="n">KM</span><span class="o">.</span><span class="n">kanes_equations</span><span class="p">(</span><span class="n">FL</span><span class="p">,</span> <span class="n">BL</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">mass_matrix</span>
<span class="go">[-5]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">forcing</span>
<span class="go">[-7]</span>
</pre></div>
</div>
<p>When there are motion constraints, the mass matrix is augmented by the
<span class="math">\(k_{dnh}(q, t)\)</span> matrix, and the forcing vector by the <span class="math">\(f_{dnh}(q,
\dot{q}, u, t)\)</span> vector.</p>
<p>There are also the &#8220;full&#8221; mass matrix and &#8220;full&#8221; forcing vector terms, these
include the kinematic differential equations; the mass matrix is of size (n +
o) x (n + o), or square and the size of all coordinates and speeds.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">mass_matrix_full</span>
<span class="go">[1,  0]</span>
<span class="go">[0, -5]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">forcing_full</span>
<span class="go">[ u]</span>
<span class="go">[-7]</span>
</pre></div>
</div>
<p>The forcing vector can be linearized as well; its Jacobian is taken only with
respect to the independent coordinates and speeds. The linearized forcing
vector is of size (n + o) x (n - l + o - m), where l is the number of
configuration constraints and m is the number of motion constraints. Two
matrices are returned; the first is an &#8220;A&#8221; matrix, or the Jacobian with respect
to the independent states, the second is a &#8220;B&#8221; matrix, or the Jacobian with
respect to &#8216;forces&#8217;; this can be an empty matrix if there are no &#8216;forces&#8217;.
Forces here are undefined functions of time (dynamic symbols); they are only
allowed to be in the forcing vector and their derivatives are not allowed to be
present. If dynamic symbols appear in the mass matrix or kinematic differential
equations, an error with be raised.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">linearize</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">[0, 1]</span>
<span class="go">[0, 0]</span>
</pre></div>
</div>
<p>Exploration of the provided examples is encouraged in order to gain more
understanding of the <tt class="docutils literal"><span class="pre">Kane</span></tt> object.</p>
</div>
<div class="section" id="module-sympy.physics.mechanics.kane">
<span id="docstrings"></span><h2>Docstrings<a class="headerlink" href="#module-sympy.physics.mechanics.kane" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="sympy.physics.mechanics.kane.Kane">
<em class="property">class </em><tt class="descclassname">sympy.physics.mechanics.kane.</tt><tt class="descname">Kane</tt><big>(</big><em>frame</em><big>)</big><a class="reference internal" href="../../../_modules/sympy/physics/mechanics/kane.html#Kane"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sympy.physics.mechanics.kane.Kane" title="Permalink to this definition">¶</a></dt>
<dd><p>Kane&#8217;s method object.</p>
<p>This object is used to do the &#8220;book-keeping&#8221; as you go through and form
equations of motion in the way Kane presents in:
Kane, T., Levinson, D. Dynamics Theory and Applications. 1985 McGraw-Hill</p>
<p>The attributes are for equations in the form [M] udot = forcing</p>
<p class="rubric">Examples</p>
<p>This is a simple example for a one defree of freedom translational
spring-mass-damper.</p>
<p>In this example, we first need to do the kinematics.
This involves creating generalized speeds and coordinates and their
derivatives.
Then we create a point and set its velocity in a frame:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sympy</span> <span class="kn">import</span> <span class="n">symbols</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sympy.physics.mechanics</span> <span class="kn">import</span> <span class="n">dynamicsymbols</span><span class="p">,</span> <span class="n">ReferenceFrame</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sympy.physics.mechanics</span> <span class="kn">import</span> <span class="n">Point</span><span class="p">,</span> <span class="n">Particle</span><span class="p">,</span> <span class="n">Kane</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="p">,</span> <span class="n">u</span> <span class="o">=</span> <span class="n">dynamicsymbols</span><span class="p">(</span><span class="s">&#39;q u&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qd</span><span class="p">,</span> <span class="n">ud</span> <span class="o">=</span> <span class="n">dynamicsymbols</span><span class="p">(</span><span class="s">&#39;q u&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s">&#39;m c k&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">N</span> <span class="o">=</span> <span class="n">ReferenceFrame</span><span class="p">(</span><span class="s">&#39;N&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">P</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">P</span><span class="o">.</span><span class="n">set_vel</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">u</span> <span class="o">*</span> <span class="n">N</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>Next we need to arrange/store information in the way the Kane requires.
The kinematic differential equations need to be stored in a dict.
A list of forces/torques must be constructed, where each entry in the list
is a (Point, Vector) or (ReferenceFrame, Vector) tuple, where the Vectors
represent the Force or Torque.
Next a particle needs to be created, and it needs to have a point and mass
assigned to it.
Finally, a list of all bodies and particles needs to be created:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">kd</span> <span class="o">=</span> <span class="p">[</span><span class="n">qd</span> <span class="o">-</span> <span class="n">u</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FL</span> <span class="o">=</span> <span class="p">[(</span><span class="n">P</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="n">k</span> <span class="o">*</span> <span class="n">q</span> <span class="o">-</span> <span class="n">c</span> <span class="o">*</span> <span class="n">u</span><span class="p">)</span> <span class="o">*</span> <span class="n">N</span><span class="o">.</span><span class="n">x</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pa</span> <span class="o">=</span> <span class="n">Particle</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pa</span><span class="o">.</span><span class="n">mass</span> <span class="o">=</span> <span class="n">m</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pa</span><span class="o">.</span><span class="n">point</span> <span class="o">=</span> <span class="n">P</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">BL</span> <span class="o">=</span> <span class="p">[</span><span class="n">pa</span><span class="p">]</span>
</pre></div>
</div>
<p>Finally we can generate the equations of motion.
First we create the Kane object and supply an inertial frame.
Next we pass it the generalized speeds.
Then we pass it the kinematic differential equation dict.
Next we form FR* and FR to complete: Fr + Fr* = 0.
We have the equations of motion at this point.
It makes sense to rearrnge them though, so we calculate the mass matrix and
the forcing terms, for E.o.M. in the form: [MM] udot = forcing, where MM is
the mass matrix, udot is a vector of the time derivatives of the
generalized speeds, and forcing is a vector representing &#8220;forcing&#8221; terms:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span> <span class="o">=</span> <span class="n">Kane</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">coords</span><span class="p">([</span><span class="n">q</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">speeds</span><span class="p">([</span><span class="n">u</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">kindiffeq</span><span class="p">(</span><span class="n">kd</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">fr</span><span class="p">,</span> <span class="n">frstar</span><span class="p">)</span> <span class="o">=</span> <span class="n">KM</span><span class="o">.</span><span class="n">kanes_equations</span><span class="p">(</span><span class="n">FL</span><span class="p">,</span> <span class="n">BL</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MM</span> <span class="o">=</span> <span class="n">KM</span><span class="o">.</span><span class="n">mass_matrix</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">forcing</span> <span class="o">=</span> <span class="n">KM</span><span class="o">.</span><span class="n">forcing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rhs</span> <span class="o">=</span> <span class="n">MM</span><span class="o">.</span><span class="n">inv</span><span class="p">()</span> <span class="o">*</span> <span class="n">forcing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rhs</span>
<span class="go">[-(c*u(t) + k*q(t))/m]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KM</span><span class="o">.</span><span class="n">linearize</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">[0, 1]</span>
<span class="go">[k, c]</span>
</pre></div>
</div>
<p>Please look at the documentation pages for more information on how to
perform linearization and how to deal with dependent coordinates &amp; speeds,
and how do deal with bringing non-contributing forces into evidence.</p>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="9%" />
<col width="72%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>auxiliary</td>
<td>Matrix</td>
<td>If applicable, the set of auxiliary Kane&#8217;s
equations used to solve for non-contributing
forces.</td>
</tr>
<tr class="row-even"><td>mass_matrix</td>
<td>Matrix</td>
<td>The system&#8217;s mass matrix</td>
</tr>
<tr class="row-odd"><td>forcing</td>
<td>Matrix</td>
<td>The system&#8217;s forcing vector</td>
</tr>
<tr class="row-even"><td>simp</td>
<td>Boolean</td>
<td>Flag determining whether simplification of symbolic matrix
inversion can occur or not</td>
</tr>
<tr class="row-odd"><td>mass_matrix_full</td>
<td>Matrix</td>
<td>The &#8220;mass matrix&#8221; for the u&#8217;s and q&#8217;s</td>
</tr>
<tr class="row-even"><td>forcing_full</td>
<td>Matrix</td>
<td>The &#8220;forcing vector&#8221; for the u&#8217;s and q&#8217;s</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="sympy.physics.mechanics.kane.Kane.coords">
<tt class="descname">coords</tt><big>(</big><em>qind</em>, <em>qdep=</em><span class="optional">[</span><span class="optional">]</span>, <em>coneqs=</em><span class="optional">[</span><span class="optional">]</span><big>)</big><a class="reference internal" href="../../../_modules/sympy/physics/mechanics/kane.html#Kane.coords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sympy.physics.mechanics.kane.Kane.coords" title="Permalink to this definition">¶</a></dt>
<dd><p>Supply all the generalized coordiantes in a list.</p>
<p>If some coordinates are dependent, supply them as part of qdep. Their
dependent nature will only show up in the linearization process though.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>qind</strong> : list</p>
<blockquote>
<div><p>A list of independent generalized coords</p>
</div></blockquote>
<p><strong>qdep</strong> : list</p>
<blockquote>
<div><p>List of dependent coordinates</p>
</div></blockquote>
<p><strong>coneq</strong> : list</p>
<blockquote class="last">
<div><p>List of expressions which are equal to zero; these are the
configuration constraint equations</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sympy.physics.mechanics.kane.Kane.kanes_equations">
<tt class="descname">kanes_equations</tt><big>(</big><em>FL</em>, <em>BL</em><big>)</big><a class="reference internal" href="../../../_modules/sympy/physics/mechanics/kane.html#Kane.kanes_equations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sympy.physics.mechanics.kane.Kane.kanes_equations" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to form Kane&#8217;s equations, Fr + Fr* = 0.</p>
<p>Returns (Fr, Fr*). In the case where auxiliary generalized speeds are
present (say, s auxiliary speeds, o generalized speeds, and m motion
constraints) the length of the returned vectors will be o - m + s in
length. The first o - m equations will be the constrained Kane&#8217;s
equations, then the s auxiliary Kane&#8217;s equations. These auxiliary
equations can be accessed with the auxiliary_eqs().</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>FL</strong> : list</p>
<blockquote>
<div><p>Takes in a list of (Point, Vector) or (ReferenceFrame, Vector)
tuples which represent the force at a point or torque on a frame.</p>
</div></blockquote>
<p><strong>BL</strong> : list</p>
<blockquote class="last">
<div><p>A list of all RigidBody&#8217;s and Particle&#8217;s in the system.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sympy.physics.mechanics.kane.Kane.kindiffdict">
<tt class="descname">kindiffdict</tt><big>(</big><big>)</big><a class="reference internal" href="../../../_modules/sympy/physics/mechanics/kane.html#Kane.kindiffdict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sympy.physics.mechanics.kane.Kane.kindiffdict" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the qdot&#8217;s in a dictionary.</p>
</dd></dl>

<dl class="method">
<dt id="sympy.physics.mechanics.kane.Kane.kindiffeq">
<tt class="descname">kindiffeq</tt><big>(</big><em>kdeqs</em><big>)</big><a class="reference internal" href="../../../_modules/sympy/physics/mechanics/kane.html#Kane.kindiffeq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sympy.physics.mechanics.kane.Kane.kindiffeq" title="Permalink to this definition">¶</a></dt>
<dd><p>Supply all the kinematic differential equations in a list.</p>
<p>They should be in the form [Expr1, Expr2, ...] where Expri is equal to
zero</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>kdeqs</strong> : list (of Expr)</p>
<blockquote class="last">
<div><p>The listof kinematic differential equations</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sympy.physics.mechanics.kane.Kane.linearize">
<tt class="descname">linearize</tt><big>(</big><big>)</big><a class="reference internal" href="../../../_modules/sympy/physics/mechanics/kane.html#Kane.linearize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sympy.physics.mechanics.kane.Kane.linearize" title="Permalink to this definition">¶</a></dt>
<dd><p>Method used to generate linearized equations.</p>
<p>Note that for linearization, it is assumed that time is not perturbed,
but only coordinates and positions. The &#8220;forcing&#8221; vector&#8217;s jacobian is
computed with respect to the state vector in the form [Qi, Qd, Ui, Ud].
This is the &#8220;A&#8221; matrix.</p>
<p>It also finds any non-state dynamicsymbols and computes the jacobian of
the &#8220;forcing&#8221; vector with respect to them. This is the &#8220;B&#8221; matrix; if
this is empty, an empty matrix is created</p>
<p>A tuple of (&#8220;A&#8221;, &#8220;B&#8221;) is returned.</p>
</dd></dl>

<dl class="method">
<dt id="sympy.physics.mechanics.kane.Kane.speeds">
<tt class="descname">speeds</tt><big>(</big><em>uind</em>, <em>udep=</em><span class="optional">[</span><span class="optional">]</span>, <em>coneqs=</em><span class="optional">[</span><span class="optional">]</span>, <em>diffconeqs=None</em>, <em>u_auxiliary=</em><span class="optional">[</span><span class="optional">]</span><big>)</big><a class="reference internal" href="../../../_modules/sympy/physics/mechanics/kane.html#Kane.speeds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sympy.physics.mechanics.kane.Kane.speeds" title="Permalink to this definition">¶</a></dt>
<dd><p>Supply all the generalized speeds in a list.</p>
<p>If there are motion constraints or auxiliary speeds, they are provided
here as well (as well as motion constraints).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>uind</strong> : list</p>
<blockquote>
<div><p>A list of independent generalized speeds</p>
</div></blockquote>
<p><strong>udep</strong> : list</p>
<blockquote>
<div><p>Optional list of dependent speeds</p>
</div></blockquote>
<p><strong>coneqs</strong> : list</p>
<blockquote>
<div><p>Optional List of constraint expressions; these are expressions
which are equal to zero which define a speed (motion) constraint.</p>
</div></blockquote>
<p><strong>diffconeqs</strong> : list</p>
<blockquote>
<div><p>Optional, calculated automatically otherwise; list of constraint
equations; again equal to zero, but define an acceleration
constraint.</p>
</div></blockquote>
<p><strong>u_auxiliary</strong> : list</p>
<blockquote class="last">
<div><p>An optional list of auxiliary speeds used for brining
non-contributing forces into evidence</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/sympylogo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Kane&#8217;s Method in Physics/Mechanics</a><ul>
<li><a class="reference internal" href="#structure-of-equations">Structure of Equations</a></li>
<li><a class="reference internal" href="#id2">Kane&#8217;s Method in Physics/Mechanics</a></li>
<li><a class="reference internal" href="#module-sympy.physics.mechanics.kane">Docstrings</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="masses.html"
                        title="previous chapter">Mechanics: Masses, Inertias, Particles and Rigid Bodies</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="particle.html"
                        title="next chapter">Particle</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../_sources/modules/physics/mechanics/kane.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../../../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="particle.html" title="Particle"
             >next</a> |</li>
        <li class="right" >
          <a href="masses.html" title="Mechanics: Masses, Inertias, Particles and Rigid Bodies"
             >previous</a> |</li>
        <li><a href="../../../index.html">SymPy 0.7.1-git documentation</a> &raquo;</li>
          <li><a href="../../index.html" >SymPy Modules Reference</a> &raquo;</li>
          <li><a href="../index.html" >Physics Module</a> &raquo;</li>
          <li><a href="index.html" >Physics/Mechanics Module</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008, 2009, 2010, 2011, 2012 SymPy Development Team.
      Last updated on Jan 05, 2012.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>